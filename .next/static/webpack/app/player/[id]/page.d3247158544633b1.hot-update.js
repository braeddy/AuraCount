"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/player/[id]/page",{

/***/ "(app-pages-browser)/./src/services/database.ts":
/*!**********************************!*\
  !*** ./src/services/database.ts ***!
  \**********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DatabaseService: function() { return /* binding */ DatabaseService; }\n/* harmony export */ });\n/* __next_internal_client_entry_do_not_use__ DatabaseService auto */ const STORAGE_KEY = \"auracount-game-state\";\nconst BACKUP_KEY = \"auracount-backup\";\nclass DatabaseService {\n    static getInstance() {\n        if (!DatabaseService.instance) {\n            DatabaseService.instance = new DatabaseService();\n        }\n        return DatabaseService.instance;\n    }\n    // Carica i dati dal localStorage\n    loadFromStorage() {\n        if (false) {}\n        try {\n            const saved = localStorage.getItem(STORAGE_KEY);\n            if (saved) {\n                const parsedState = JSON.parse(saved);\n                // Converti le date da stringhe\n                parsedState.players = parsedState.players.map((p)=>({\n                        ...p,\n                        createdAt: new Date(p.createdAt)\n                    }));\n                parsedState.actions = parsedState.actions.map((a)=>({\n                        ...a,\n                        timestamp: new Date(a.timestamp)\n                    }));\n                this.gameState = parsedState;\n            }\n        } catch (error) {\n            console.error(\"Errore nel caricamento dei dati:\", error);\n            this.loadBackup();\n        }\n    }\n    // Salva i dati nel localStorage\n    saveToStorage() {\n        if (false) {}\n        try {\n            localStorage.setItem(STORAGE_KEY, JSON.stringify(this.gameState));\n            // Crea un backup\n            localStorage.setItem(BACKUP_KEY, JSON.stringify(this.gameState));\n        } catch (error) {\n            console.error(\"Errore nel salvataggio dei dati:\", error);\n        }\n    }\n    // Carica il backup\n    loadBackup() {\n        try {\n            const backup = localStorage.getItem(BACKUP_KEY);\n            if (backup) {\n                this.gameState = JSON.parse(backup);\n            }\n        } catch (error) {\n            console.error(\"Errore nel caricamento del backup:\", error);\n        }\n    }\n    // Carica dati da un GameState esterno (per le sessioni)\n    loadFromGameState(gameState) {\n        this.gameState = {\n            players: gameState.players.map((p)=>({\n                    ...p,\n                    createdAt: new Date(p.createdAt)\n                })),\n            actions: gameState.actions.map((a)=>({\n                    ...a,\n                    timestamp: new Date(a.timestamp)\n                }))\n        };\n    }\n    // Ottieni tutti i giocatori\n    getPlayers() {\n        return this.gameState.players;\n    }\n    // Ottieni giocatori ordinati per aura\n    getSortedPlayers() {\n        return [\n            ...this.gameState.players\n        ].sort((a, b)=>b.aura - a.aura);\n    }\n    // Ottieni un giocatore specifico\n    getPlayer(id) {\n        return this.gameState.players.find((p)=>p.id === id);\n    }\n    // Aggiungi un nuovo giocatore\n    addPlayer(name) {\n        const newPlayer = {\n            id: Date.now().toString(),\n            name: name.trim(),\n            aura: 0,\n            createdAt: new Date(),\n            bio: \"\"\n        };\n        this.gameState.players.push(newPlayer);\n        this.saveToStorage();\n        return newPlayer;\n    }\n    // Aggiorna un giocatore\n    updatePlayer(id, updates) {\n        const playerIndex = this.gameState.players.findIndex((p)=>p.id === id);\n        if (playerIndex === -1) return null;\n        this.gameState.players[playerIndex] = {\n            ...this.gameState.players[playerIndex],\n            ...updates\n        };\n        this.saveToStorage();\n        return this.gameState.players[playerIndex];\n    }\n    // Rimuovi un giocatore\n    removePlayer(id) {\n        const initialLength = this.gameState.players.length;\n        this.gameState.players = this.gameState.players.filter((p)=>p.id !== id);\n        this.gameState.actions = this.gameState.actions.filter((a)=>a.playerId !== id);\n        if (this.gameState.players.length < initialLength) {\n            this.saveToStorage();\n            return true;\n        }\n        return false;\n    }\n    // Cambia aura di un giocatore\n    changeAura(playerId, change, reason) {\n        const player = this.getPlayer(playerId);\n        if (!player) return false;\n        // Aggiorna l'aura del giocatore\n        this.updatePlayer(playerId, {\n            aura: player.aura + change\n        });\n        // Aggiungi l'azione allo storico\n        const action = {\n            id: Date.now().toString() + Math.random().toString(36).substr(2, 9),\n            playerId,\n            playerName: player.name,\n            change,\n            timestamp: new Date(),\n            reason\n        };\n        this.gameState.actions.unshift(action);\n        // Mantieni solo le ultime 1000 azioni\n        this.gameState.actions = this.gameState.actions.slice(0, 1000);\n        this.saveToStorage();\n        return true;\n    }\n    // Ottieni tutte le azioni\n    getActions() {\n        return this.gameState.actions;\n    }\n    // Ottieni azioni di un giocatore specifico\n    getPlayerActions(playerId) {\n        return this.gameState.actions.filter((a)=>a.playerId === playerId);\n    }\n    // Reset del gioco\n    resetGame() {\n        this.gameState = {\n            players: [],\n            actions: []\n        };\n        this.saveToStorage();\n    }\n    // Esporta i dati\n    exportData() {\n        return JSON.stringify(this.gameState, null, 2);\n    }\n    // Importa i dati\n    importData(data) {\n        try {\n            const imported = JSON.parse(data);\n            if (imported.players && imported.actions) {\n                this.gameState = imported;\n                this.saveToStorage();\n                return true;\n            }\n            return false;\n        } catch (error) {\n            console.error(\"Errore nell'importazione:\", error);\n            return false;\n        }\n    }\n    constructor(){\n        this.gameState = {\n            players: [],\n            actions: []\n        };\n        this.loadFromStorage();\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9zZXJ2aWNlcy9kYXRhYmFzZS50cyIsIm1hcHBpbmdzIjoiOzs7O3FFQUlBLE1BQU1BLGNBQWM7QUFDcEIsTUFBTUMsYUFBYTtBQUVaLE1BQU1DO0lBUVgsT0FBT0MsY0FBK0I7UUFDcEMsSUFBSSxDQUFDRCxnQkFBZ0JFLFFBQVEsRUFBRTtZQUM3QkYsZ0JBQWdCRSxRQUFRLEdBQUcsSUFBSUY7UUFDakM7UUFDQSxPQUFPQSxnQkFBZ0JFLFFBQVE7SUFDakM7SUFFQSxpQ0FBaUM7SUFDekJDLGtCQUF3QjtRQUM5QixJQUFJLEtBQWtCLEVBQWEsRUFBTztRQUUxQyxJQUFJO1lBQ0YsTUFBTUMsUUFBUUMsYUFBYUMsT0FBTyxDQUFDUjtZQUNuQyxJQUFJTSxPQUFPO2dCQUNULE1BQU1HLGNBQWNDLEtBQUtDLEtBQUssQ0FBQ0w7Z0JBQy9CLCtCQUErQjtnQkFDL0JHLFlBQVlHLE9BQU8sR0FBR0gsWUFBWUcsT0FBTyxDQUFDQyxHQUFHLENBQUMsQ0FBQ0MsSUFBWTt3QkFDekQsR0FBR0EsQ0FBQzt3QkFDSkMsV0FBVyxJQUFJQyxLQUFLRixFQUFFQyxTQUFTO29CQUNqQztnQkFDQU4sWUFBWVEsT0FBTyxHQUFHUixZQUFZUSxPQUFPLENBQUNKLEdBQUcsQ0FBQyxDQUFDSyxJQUFZO3dCQUN6RCxHQUFHQSxDQUFDO3dCQUNKQyxXQUFXLElBQUlILEtBQUtFLEVBQUVDLFNBQVM7b0JBQ2pDO2dCQUNBLElBQUksQ0FBQ0MsU0FBUyxHQUFHWDtZQUNuQjtRQUNGLEVBQUUsT0FBT1ksT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsb0NBQW9DQTtZQUNsRCxJQUFJLENBQUNFLFVBQVU7UUFDakI7SUFDRjtJQUVBLGdDQUFnQztJQUN4QkMsZ0JBQXNCO1FBQzVCLElBQUksS0FBa0IsRUFBYSxFQUFPO1FBRTFDLElBQUk7WUFDRmpCLGFBQWFrQixPQUFPLENBQUN6QixhQUFhVSxLQUFLZ0IsU0FBUyxDQUFDLElBQUksQ0FBQ04s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U0FBUyxDQUFDSCxPQUFPO0lBQy9CO0lBRUEsMkNBQTJDO0lBQzNDaUQsaUJBQWlCYixRQUFnQixFQUFnQjtRQUMvQyxPQUFPLElBQUksQ0FBQ2pDLFNBQVMsQ0FBQ0gsT0FBTyxDQUFDbUMsTUFBTSxDQUFDbEMsQ0FBQUEsSUFBS0EsRUFBRW1DLFFBQVEsS0FBS0E7SUFDM0Q7SUFFQSxrQkFBa0I7SUFDbEJjLFlBQWtCO1FBQ2hCLElBQUksQ0FBQy9DLFNBQVMsR0FBRztZQUFFUixTQUFTLEVBQUU7WUFBRUssU0FBUyxFQUFFO1FBQUM7UUFDNUMsSUFBSSxDQUFDTyxhQUFhO0lBQ3BCO0lBRUEsaUJBQWlCO0lBQ2pCNEMsYUFBcUI7UUFDbkIsT0FBTzFELEtBQUtnQixTQUFTLENBQUMsSUFBSSxDQUFDTixTQUFTLEVBQUUsTUFBTTtJQUM5QztJQUVBLGlCQUFpQjtJQUNqQmlELFdBQVdDLElBQVksRUFBVztRQUNoQyxJQUFJO1lBQ0YsTUFBTUMsV0FBVzdELEtBQUtDLEtBQUssQ0FBQzJEO1lBQzVCLElBQUlDLFNBQVMzRCxPQUFPLElBQUkyRCxTQUFTdEQsT0FBTyxFQUFFO2dCQUN4QyxJQUFJLENBQUNHLFNBQVMsR0FBR21EO2dCQUNqQixJQUFJLENBQUMvQyxhQUFhO2dCQUNsQixPQUFPO1lBQ1Q7WUFDQSxPQUFPO1FBQ1QsRUFBRSxPQUFPSCxPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyw2QkFBOEJBO1lBQzVDLE9BQU87UUFDVDtJQUNGO0lBak1BLGFBQXNCO2FBRmRELFlBQXVCO1lBQUVSLFNBQVMsRUFBRTtZQUFFSyxTQUFTLEVBQUU7UUFBQztRQUd4RCxJQUFJLENBQUNaLGVBQWU7SUFDdEI7QUFnTUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL3NlcnZpY2VzL2RhdGFiYXNlLnRzPzNmNmEiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xyXG5cclxuaW1wb3J0IHsgUGxheWVyLCBBdXJhQWN0aW9uLCBHYW1lU3RhdGUgfSBmcm9tICdAL3R5cGVzJztcclxuXHJcbmNvbnN0IFNUT1JBR0VfS0VZID0gJ2F1cmFjb3VudC1nYW1lLXN0YXRlJztcclxuY29uc3QgQkFDS1VQX0tFWSA9ICdhdXJhY291bnQtYmFja3VwJztcclxuXHJcbmV4cG9ydCBjbGFzcyBEYXRhYmFzZVNlcnZpY2Uge1xyXG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBEYXRhYmFzZVNlcnZpY2U7XHJcbiAgcHJpdmF0ZSBnYW1lU3RhdGU6IEdhbWVTdGF0ZSA9IHsgcGxheWVyczogW10sIGFjdGlvbnM6IFtdIH07XHJcblxyXG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmxvYWRGcm9tU3RvcmFnZSgpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldEluc3RhbmNlKCk6IERhdGFiYXNlU2VydmljZSB7XHJcbiAgICBpZiAoIURhdGFiYXNlU2VydmljZS5pbnN0YW5jZSkge1xyXG4gICAgICBEYXRhYmFzZVNlcnZpY2UuaW5zdGFuY2UgPSBuZXcgRGF0YWJhc2VTZXJ2aWNlKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gRGF0YWJhc2VTZXJ2aWNlLmluc3RhbmNlO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2FyaWNhIGkgZGF0aSBkYWwgbG9jYWxTdG9yYWdlXHJcbiAgcHJpdmF0ZSBsb2FkRnJvbVN0b3JhZ2UoKTogdm9pZCB7XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc2F2ZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX0tFWSk7XHJcbiAgICAgIGlmIChzYXZlZCkge1xyXG4gICAgICAgIGNvbnN0IHBhcnNlZFN0YXRlID0gSlNPTi5wYXJzZShzYXZlZCk7XHJcbiAgICAgICAgLy8gQ29udmVydGkgbGUgZGF0ZSBkYSBzdHJpbmdoZVxyXG4gICAgICAgIHBhcnNlZFN0YXRlLnBsYXllcnMgPSBwYXJzZWRTdGF0ZS5wbGF5ZXJzLm1hcCgocDogYW55KSA9PiAoe1xyXG4gICAgICAgICAgLi4ucCxcclxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUocC5jcmVhdGVkQXQpXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHBhcnNlZFN0YXRlLmFjdGlvbnMgPSBwYXJzZWRTdGF0ZS5hY3Rpb25zLm1hcCgoYTogYW55KSA9PiAoe1xyXG4gICAgICAgICAgLi4uYSxcclxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoYS50aW1lc3RhbXApXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlID0gcGFyc2VkU3RhdGU7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yZSBuZWwgY2FyaWNhbWVudG8gZGVpIGRhdGk6JywgZXJyb3IpO1xyXG4gICAgICB0aGlzLmxvYWRCYWNrdXAoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFNhbHZhIGkgZGF0aSBuZWwgbG9jYWxTdG9yYWdlXHJcbiAgcHJpdmF0ZSBzYXZlVG9TdG9yYWdlKCk6IHZvaWQge1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSByZXR1cm47XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFNUT1JBR0VfS0VZLCBKU09OLnN0cmluZ2lmeSh0aGlzLmdhbWVTdGF0ZSkpO1xyXG4gICAgICAvLyBDcmVhIHVuIGJhY2t1cFxyXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShCQUNLVVBfS0VZLCBKU09OLnN0cmluZ2lmeSh0aGlzLmdhbWVTdGF0ZSkpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3JlIG5lbCBzYWx2YXRhZ2dpbyBkZWkgZGF0aTonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBDYXJpY2EgaWwgYmFja3VwXHJcbiAgcHJpdmF0ZSBsb2FkQmFja3VwKCk6IHZvaWQge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgYmFja3VwID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oQkFDS1VQX0tFWSk7XHJcbiAgICAgIGlmIChiYWNrdXApIHtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZSA9IEpTT04ucGFyc2UoYmFja3VwKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3JlIG5lbCBjYXJpY2FtZW50byBkZWwgYmFja3VwOicsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIENhcmljYSBkYXRpIGRhIHVuIEdhbWVTdGF0ZSBlc3Rlcm5vIChwZXIgbGUgc2Vzc2lvbmkpXHJcbiAgbG9hZEZyb21HYW1lU3RhdGUoZ2FtZVN0YXRlOiBHYW1lU3RhdGUpOiB2b2lkIHtcclxuICAgIHRoaXMuZ2FtZVN0YXRlID0ge1xyXG4gICAgICBwbGF5ZXJzOiBnYW1lU3RhdGUucGxheWVycy5tYXAocCA9PiAoe1xyXG4gICAgICAgIC4uLnAsXHJcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZShwLmNyZWF0ZWRBdClcclxuICAgICAgfSkpLFxyXG4gICAgICBhY3Rpb25zOiBnYW1lU3RhdGUuYWN0aW9ucy5tYXAoYSA9PiAoe1xyXG4gICAgICAgIC4uLmEsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZShhLnRpbWVzdGFtcClcclxuICAgICAgfSkpXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLy8gT3R0aWVuaSB0dXR0aSBpIGdpb2NhdG9yaVxyXG4gIGdldFBsYXllcnMoKTogUGxheWVyW10ge1xyXG4gICAgcmV0dXJuIHRoaXMuZ2FtZVN0YXRlLnBsYXllcnM7XHJcbiAgfVxyXG5cclxuICAvLyBPdHRpZW5pIGdpb2NhdG9yaSBvcmRpbmF0aSBwZXIgYXVyYVxyXG4gIGdldFNvcnRlZFBsYXllcnMoKTogUGxheWVyW10ge1xyXG4gICAgcmV0dXJuIFsuLi50aGlzLmdhbWVTdGF0ZS5wbGF5ZXJzXS5zb3J0KChhLCBiKSA9PiBiLmF1cmEgLSBhLmF1cmEpO1xyXG4gIH1cclxuXHJcbiAgLy8gT3R0aWVuaSB1biBnaW9jYXRvcmUgc3BlY2lmaWNvXHJcbiAgZ2V0UGxheWVyKGlkOiBzdHJpbmcpOiBQbGF5ZXIgfCB1bmRlZmluZWQge1xyXG4gICAgcmV0dXJuIHRoaXMuZ2FtZVN0YXRlLnBsYXllcnMuZmluZChwID0+IHAuaWQgPT09IGlkKTtcclxuICB9XHJcblxyXG4gIC8vIEFnZ2l1bmdpIHVuIG51b3ZvIGdpb2NhdG9yZVxyXG4gIGFkZFBsYXllcihuYW1lOiBzdHJpbmcpOiBQbGF5ZXIge1xyXG4gICAgY29uc3QgbmV3UGxheWVyOiBQbGF5ZXIgPSB7XHJcbiAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXHJcbiAgICAgIG5hbWU6IG5hbWUudHJpbSgpLFxyXG4gICAgICBhdXJhOiAwLFxyXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgIGJpbzogJydcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5nYW1lU3RhdGUucGxheWVycy5wdXNoKG5ld1BsYXllcik7XHJcbiAgICB0aGlzLnNhdmVUb1N0b3JhZ2UoKTtcclxuICAgIHJldHVybiBuZXdQbGF5ZXI7XHJcbiAgfVxyXG5cclxuICAvLyBBZ2dpb3JuYSB1biBnaW9jYXRvcmVcclxuICB1cGRhdGVQbGF5ZXIoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxQbGF5ZXI+KTogUGxheWVyIHwgbnVsbCB7XHJcbiAgICBjb25zdCBwbGF5ZXJJbmRleCA9IHRoaXMuZ2FtZVN0YXRlLnBsYXllcnMuZmluZEluZGV4KHAgPT4gcC5pZCA9PT0gaWQpO1xyXG4gICAgaWYgKHBsYXllckluZGV4ID09PSAtMSkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgdGhpcy5nYW1lU3RhdGUucGxheWVyc1twbGF5ZXJJbmRleF0gPSB7XHJcbiAgICAgIC4uLnRoaXMuZ2FtZVN0YXRlLnBsYXllcnNbcGxheWVySW5kZXhdLFxyXG4gICAgICAuLi51cGRhdGVzXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLnNhdmVUb1N0b3JhZ2UoKTtcclxuICAgIHJldHVybiB0aGlzLmdhbWVTdGF0ZS5wbGF5ZXJzW3BsYXllckluZGV4XTtcclxuICB9XHJcblxyXG4gIC8vIFJpbXVvdmkgdW4gZ2lvY2F0b3JlXHJcbiAgcmVtb3ZlUGxheWVyKGlkOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IGluaXRpYWxMZW5ndGggPSB0aGlzLmdhbWVTdGF0ZS5wbGF5ZXJzLmxlbmd0aDtcclxuICAgIHRoaXMuZ2FtZVN0YXRlLnBsYXllcnMgPSB0aGlzLmdhbWVTdGF0ZS5wbGF5ZXJzLmZpbHRlcihwID0+IHAuaWQgIT09IGlkKTtcclxuICAgIHRoaXMuZ2FtZVN0YXRlLmFjdGlvbnMgPSB0aGlzLmdhbWVTdGF0ZS5hY3Rpb25zLmZpbHRlcihhID0+IGEucGxheWVySWQgIT09IGlkKTtcclxuICAgIFxyXG4gICAgaWYgKHRoaXMuZ2FtZVN0YXRlLnBsYXllcnMubGVuZ3RoIDwgaW5pdGlhbExlbmd0aCkge1xyXG4gICAgICB0aGlzLnNhdmVUb1N0b3JhZ2UoKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvLyBDYW1iaWEgYXVyYSBkaSB1biBnaW9jYXRvcmVcclxuICBjaGFuZ2VBdXJhKHBsYXllcklkOiBzdHJpbmcsIGNoYW5nZTogbnVtYmVyLCByZWFzb24/OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IHBsYXllciA9IHRoaXMuZ2V0UGxheWVyKHBsYXllcklkKTtcclxuICAgIGlmICghcGxheWVyKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgLy8gQWdnaW9ybmEgbCdhdXJhIGRlbCBnaW9jYXRvcmVcclxuICAgIHRoaXMudXBkYXRlUGxheWVyKHBsYXllcklkLCB7IGF1cmE6IHBsYXllci5hdXJhICsgY2hhbmdlIH0pO1xyXG5cclxuICAgIC8vIEFnZ2l1bmdpIGwnYXppb25lIGFsbG8gc3Rvcmljb1xyXG4gICAgY29uc3QgYWN0aW9uOiBBdXJhQWN0aW9uID0ge1xyXG4gICAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpLFxyXG4gICAgICBwbGF5ZXJJZCxcclxuICAgICAgcGxheWVyTmFtZTogcGxheWVyLm5hbWUsXHJcbiAgICAgIGNoYW5nZSxcclxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxyXG4gICAgICByZWFzb25cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5nYW1lU3RhdGUuYWN0aW9ucy51bnNoaWZ0KGFjdGlvbik7XHJcbiAgICAvLyBNYW50aWVuaSBzb2xvIGxlIHVsdGltZSAxMDAwIGF6aW9uaVxyXG4gICAgdGhpcy5nYW1lU3RhdGUuYWN0aW9ucyA9IHRoaXMuZ2FtZVN0YXRlLmFjdGlvbnMuc2xpY2UoMCwgMTAwMCk7XHJcbiAgICBcclxuICAgIHRoaXMuc2F2ZVRvU3RvcmFnZSgpO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICAvLyBPdHRpZW5pIHR1dHRlIGxlIGF6aW9uaVxyXG4gIGdldEFjdGlvbnMoKTogQXVyYUFjdGlvbltdIHtcclxuICAgIHJldHVybiB0aGlzLmdhbWVTdGF0ZS5hY3Rpb25zO1xyXG4gIH1cclxuXHJcbiAgLy8gT3R0aWVuaSBhemlvbmkgZGkgdW4gZ2lvY2F0b3JlIHNwZWNpZmljb1xyXG4gIGdldFBsYXllckFjdGlvbnMocGxheWVySWQ6IHN0cmluZyk6IEF1cmFBY3Rpb25bXSB7XHJcbiAgICByZXR1cm4gdGhpcy5nYW1lU3RhdGUuYWN0aW9ucy5maWx0ZXIoYSA9PiBhLnBsYXllcklkID09PSBwbGF5ZXJJZCk7XHJcbiAgfVxyXG5cclxuICAvLyBSZXNldCBkZWwgZ2lvY29cclxuICByZXNldEdhbWUoKTogdm9pZCB7XHJcbiAgICB0aGlzLmdhbWVTdGF0ZSA9IHsgcGxheWVyczogW10sIGFjdGlvbnM6IFtdIH07XHJcbiAgICB0aGlzLnNhdmVUb1N0b3JhZ2UoKTtcclxuICB9XHJcblxyXG4gIC8vIEVzcG9ydGEgaSBkYXRpXHJcbiAgZXhwb3J0RGF0YSgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMuZ2FtZVN0YXRlLCBudWxsLCAyKTtcclxuICB9XHJcblxyXG4gIC8vIEltcG9ydGEgaSBkYXRpXHJcbiAgaW1wb3J0RGF0YShkYXRhOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGltcG9ydGVkID0gSlNPTi5wYXJzZShkYXRhKTtcclxuICAgICAgaWYgKGltcG9ydGVkLnBsYXllcnMgJiYgaW1wb3J0ZWQuYWN0aW9ucykge1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlID0gaW1wb3J0ZWQ7XHJcbiAgICAgICAgdGhpcy5zYXZlVG9TdG9yYWdlKCk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3JlIG5lbGxcXCdpbXBvcnRhemlvbmU6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJTVE9SQUdFX0tFWSIsIkJBQ0tVUF9LRVkiLCJEYXRhYmFzZVNlcnZpY2UiLCJnZXRJbnN0YW5jZSIsImluc3RhbmNlIiwibG9hZEZyb21TdG9yYWdlIiwic2F2ZWQiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwicGFyc2VkU3RhdGUiLCJKU09OIiwicGFyc2UiLCJwbGF5ZXJzIiwibWFwIiwicCIsImNyZWF0ZWRBdCIsIkRhdGUiLCJhY3Rpb25zIiwiYSIsInRpbWVzdGFtcCIsImdhbWVTdGF0ZSIsImVycm9yIiwiY29uc29sZSIsImxvYWRCYWNrdXAiLCJzYXZlVG9TdG9yYWdlIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImJhY2t1cCIsImxvYWRGcm9tR2FtZVN0YXRlIiwiZ2V0UGxheWVycyIsImdldFNvcnRlZFBsYXllcnMiLCJzb3J0IiwiYiIsImF1cmEiLCJnZXRQbGF5ZXIiLCJpZCIsImZpbmQiLCJhZGRQbGF5ZXIiLCJuYW1lIiwibmV3UGxheWVyIiwibm93IiwidG9TdHJpbmciLCJ0cmltIiwiYmlvIiwicHVzaCIsInVwZGF0ZVBsYXllciIsInVwZGF0ZXMiLCJwbGF5ZXJJbmRleCIsImZpbmRJbmRleCIsInJlbW92ZVBsYXllciIsImluaXRpYWxMZW5ndGgiLCJsZW5ndGgiLCJmaWx0ZXIiLCJwbGF5ZXJJZCIsImNoYW5nZUF1cmEiLCJjaGFuZ2UiLCJyZWFzb24iLCJwbGF5ZXIiLCJhY3Rpb24iLCJNYXRoIiwicmFuZG9tIiwic3Vic3RyIiwicGxheWVyTmFtZSIsInVuc2hpZnQiLCJzbGljZSIsImdldEFjdGlvbnMiLCJnZXRQbGF5ZXJBY3Rpb25zIiwicmVzZXRHYW1lIiwiZXhwb3J0RGF0YSIsImltcG9ydERhdGEiLCJkYXRhIiwiaW1wb3J0ZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/services/database.ts\n"));

/***/ })

});